import{_ as t}from"./OperationButtons.d62792c7.js";import{Y as e,k as a,Z as s,r as n,l as o,w as r,o as d,n as i,p as c,t as u,T as l,_ as p,j as m,m as h}from"./vendor.e77115a4.js";const v={name:"AccountSelect",components:{NPopselect:e,NButton:a},props:{record:{type:Object}},setup:t=>({value:s(t.record.accountId)}),computed:{options(){try{var t=[];return this.$store.state.account.data.forEach((e=>{(e.is_active||this.record.id>0)&&t.push({label:e.name,value:e.id})})),t}catch(e){return[{label:"-",value:"-"}]}},selectedLabel(){try{return this.$store.state.account.data.find((t=>t.id==this.value)).name}catch(t){return console.log(t),""}}},methods:{changeAccount(t){this.$store.commit("asset/edit",{id:this.record.id,field:"accountId",value:t}),this.value=t}},watch:{record:function(){this.value=this.record.accountId}}};v.render=function(t,e,a,s,l,p){const m=n("n-button"),h=n("n-popselect");return d(),o(h,{value:s.value,"onUpdate:value":e[0]||(e[0]=t=>s.value=t),options:p.options,trigger:"click","on-update:value":t=>p.changeAccount(t)},{default:r((()=>[i(m,{disabled:!a.record.edit},{default:r((()=>[c(u(p.selectedLabel||"选择账户"),1)])),_:1},8,["disabled"])])),_:1},8,["value","options","on-update:value"])};const b={name:"AssetDataTable",components:{NDataTable:l,NDatePicker:p,NInput:m,OperationButtons:t,AccountSelect:v},setup:()=>({pagination:{pageSize:20}}),computed:{data(){return this.$store.state.asset.data},columns(){var e=this.$store;return[{title:"日期",key:"date",render:t=>h(p,{value:Date.parse(t.date),type:"date",disabled:!t.edit,"on-update:value":a=>{var s=new Date(a);s.setTime(a-60*s.getTimezoneOffset()*1e3),e.commit("asset/edit",{id:t.id,field:"date",value:s.toISOString().split("T")[0]})}})},{title:"账户",key:"accountId",render:t=>h(v,{record:t})},{title:"金额",key:"amount",render(t){var a="";return(t.amount||0==t.amount)&&(a+=t.amount),h(m,{value:a,type:"text",disabled:!t.edit,placeholder:"","on-update:value":a=>{e.commit("asset/edit",{id:t.id,field:"amount",value:a})}})}},{title:"操作",key:"edit",width:400,render:e=>h(t,{record:e,table:"asset"})}]}}};b.render=function(t,e,a,s,r,i){const c=n("n-data-table");return d(),o(c,{bordered:!1,columns:i.columns,data:i.data,pagination:s.pagination,size:"small"},null,8,["columns","data","pagination"])};const f={name:"Asset",components:{AssetDataTable:b},mounted(){0==this.$store.state.asset.data.length&&this.$store.dispatch("asset/getData"),0==this.$store.state.account.data.length&&this.$store.dispatch("account/getData")}};f.render=function(t,e,a,s,r,i){const c=n("AssetDataTable");return d(),o(c)};export{f as default};
